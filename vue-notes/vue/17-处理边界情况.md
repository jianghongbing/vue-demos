# 处理边界情况 

## 访问元素和组件 

在绝大多数情况下, 最好不要触达另一个组件实例内部或手动操作DOM元素, 一般通过prop和自定义事件可以满足大部分组件之间的通讯. 不过也确实在某些情况下需要直接去访问元素和组件, Vue提供了下面的一些api来访问元素和组件, 这些api都有一些相同的特点, 都以$开头并且都是嵌入到组件实例上的属性或者方法, 因此可以在组件内部可以直接访问这些属性. 

* $root: 访问根组件实例, 通过$root可以访问根实例上的数据和调用根实例上的方法. 所有的子组件都可以将root实例作为一个全局store来访问, 可用于存储一些简单的数据. 
* $parent: 访问父组件实例. 
* $refs: 一个对象, 包含注册过ref attribute的所有DOM元素和组件实例. 通过元素或者组件的ref attribute可以获得到对应的元素和组件实例. 
* $forceUpdate: 强制更新组件. 会触发beforeUpdate, render, updated这些钩子函数.

## 依赖注入

在Vue中, 子组件访问父组件里面的数据有2中方式, 一种是通过[Prop](./13-Prop.md)来传递给子组件, 二是在子组件中通过$parent来访问父组件中的数据和方法. 但是这两种方式有局限性, 只能在直接父子组件中访问, 如果父级组件和子级组件层次比较深时, 需要通过层层传递才能在内部组件中访问外层级的父组件. 通过依赖注入可以解决在层级比较深的组件中, 传递数据给子组件. 依赖注入主要是通过provide和inject来实现的. 

* provide: 用于父级组件中, 用于将父级组件中的指定数据和方法提供给后代组件
* inject: 用于子组件中, 定义在子组件中接收的父组件中的数据和方法. 

在深层级的组件中, 通过依赖注入似的父级组件传递数据给后代组件是很方便的, 但是依赖注入使组件之间更加耦合, 并且依赖注入的数据不是响应式的, 因此在复杂的应用中, 一般不推荐使用依赖注入. 如果必须要达到依赖注入才能实现的功能, 可通过vuex来实现. 

## 程序化的事件侦听器

通过$emit可以触发某一个事件, 除了给指定的事件设置监听器来处理事件回调外, Vue还提供了下面的方式来监听事件的发生.

* $on(eventName, eventHandler): 监听某个事件. 
* $once(eventName, eventHandler): 监听事件一次
* $off(eventName, eventHandler): 移除监听的事件. 



